(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))q(S);new MutationObserver(S=>{for(const p of S)if(p.type==="childList")for(const I of p.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&q(I)}).observe(document,{childList:!0,subtree:!0});function B(S){const p={};return S.integrity&&(p.integrity=S.integrity),S.referrerPolicy&&(p.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?p.credentials="include":S.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function q(S){if(S.ep)return;S.ep=!0;const p=B(S);fetch(S.href,p)}})();const R=new WebSocket("ws://localhost:49122");R.onopen=()=>{console.log("Connected to SOS. how many times do we have to do this")};R.addEventListener("message",t=>{t.data});R.onmessage=t=>{};const D=new WebSocket("ws://localhost:8081");D.onopen=()=>{console.log("✅ Connected to Relay"),D.send(JSON.stringify({event:"wsRelay:register",data:"custom:title"}))};D.addEventListener("message",async t=>{let e;try{if(t.data instanceof Blob){const B=await t.data.text();e=JSON.parse(B)}else e=JSON.parse(t.data)}catch(B){console.error("❌ Failed to parse message:",B,t.data);return}if(console.log("📡 Relay Message:",e.event,e.data),e.event==="custom:title"){console.log("🏷️ Received custom title:",e.data);const B=document.querySelector(".title");B&&(B.textContent=e.data)}});const A={boost:34},Z=t=>{const e=document.querySelector("#target-boost-track-fill"),B=e.r.baseVal.value*2*Math.PI;e.style.strokeDasharray=`${B*.75} ${B}`,e.style.strokeDashoffset=(100-t)/100*B*.75},ee=t=>{A.boost=t,Z(A.boost),document.querySelector("#target-boost-value").innerHTML=`${t}`},te=(t={blue:0,orange:0})=>{document.querySelector(".team#blue #score").innerHTML=t.blue,document.querySelector(".team#orange #score").innerHTML=t.orange},oe=(t,e)=>{const B=Math.max(Math.floor(t/60),0),q=t%60;return`${e?"+":""}${B}:${q.toString().padStart(2,"0")}`},ae=(t,e)=>{document.querySelector(".clock").innerHTML=oe(t,e)},T={name:"name",shots:34,assists:10,saves:3,goals:20,score:200},re=t=>{T.name=t,document.querySelector("#target-statcard-playername").innerHTML=`${T.name}`},W=t=>{T.shots=t,document.querySelector("#target-statcard-shots").innerHTML=`${T.shots}`},ne=t=>{T.assists=t,document.querySelector("#target-statcard-assists").innerHTML=`${T.assists}`},se=t=>{T.saves=t,document.querySelector("#target-statcard-saves").innerHTML=`${T.saves}`},le=t=>{T.goals=t,document.querySelector("#target-statcard-goals").innerHTML=`${T.goals}`},ce=t=>{T.score=t,document.querySelector("#target-statcard-score").innerHTML=`${T.score}`},me=(t={blue:"",orange:""})=>{document.querySelector("#bluenumbers").innerHTML=t.blue.split(",").join("<br/>"),document.querySelector("#orangenumbers").innerHTML=t.orange.split(",").join("<br/>")},de=(t={blue:"",orange:""})=>{document.querySelector("#bluenames").innerHTML=t.blue.split(",").join("<br/>"),document.querySelector("#orangenames").innerHTML=t.orange.split(",").join("<br/>")},ue=t=>{const e=Math.floor(t/60),q=(t%60).toString().padStart(2,"0");return`${(e%60).toString().padStart(2,"0")}:${q}`};console.log("Starting...");let w,u,i,H=null,J=0,V=0,K=1;const M=new Vimeo.Player("MatchCreatedVideo",{id:1041310123,loop:!0,autoplay:!1,width:1920,height:1080}),F=document.querySelector(".MatchInitialized"),ie=document.querySelector('iframe[title="vimeo-player-1"]'),ge=new Vimeo.Player(ie);function Y(){const t=document.getElementById("Series-Text");t.innerHTML=`GAME ${K} | BEST OF 7`}function ye(){for(let t=1;t<=4;t++){const e=document.getElementById(`blue-win-${t}`),B=document.getElementById(`orange-win-${t}`);e.style.backgroundColor="transparent",B.style.display="transparent"}for(let t=1;t<=J;t++)document.getElementById(`blue-win-${t}`).style.backgroundColor=`#${u}`;for(let t=1;t<=V;t++)document.getElementById(`orange-win-${t}`).style.backgroundColor=`#${i}`}Y();R.addEventListener("message",t=>{const e=JSON.parse(t.data);if(console.log("📦 Event received:",e.event),console.log("PARSED",e),e.event==="custom:title"){const c=e.data;console.log("🏷️ Received custom title:",c);const m=document.getElementsById("title");m.innerHTML=c}const B=document.getElementById("game-start-flyover"),q=document.getElementById("game-end-hypechamber");document.getElementById("PostGame-bg");const S=document.querySelector(".PostGameData");if(e.event==="game:update_state"&&(w=e.data),e.event==="custom:title"&&console.log("New title:",e),e.event==="game:update_state"){let r=function(a,N){N.length>11?a.style.fontSize="25px":a.style.fontSize="33px"},s=function(a){const N=document.getElementById("blue").querySelector("#name"),_=document.getElementById("orange").querySelector("#name");N.innerHTML=a.blue,_.innerHTML=a.orange,r(N,a.blue),r(_,a.orange)};var Be=r,Q=s;if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];ee(a.boost),document.getElementById("target-player").style.opacity=100}else e.data.game.hasTarget==!1&&(document.getElementById("target-player").style.opacity=0);if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];re(a.name)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];W(a.shots)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];ne(a.assists)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];se(a.saves)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];le(a.goals)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];ce(a.score)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];W(a.shots)}e.data.game.hasTarget?document.getElementById("statcard").style.opacity=100:e.data.game.hasTarget==!1&&(document.getElementById("statcard").style.opacity=0);const c=0,m=1,f=Object.values(e.data.players).filter(a=>a.team===c),g=[f.map(function(a){return a.name})].join("<br/>"),d=Object.values(e.data.players).filter(a=>a.team===m),b=[d.map(function(a){return a.name})].join(`
`);de({blue:g,orange:b}),s({blue:e.data.game.teams[0].name,orange:e.data.game.teams[1].name}),te({blue:e.data.game.teams[0].score,orange:e.data.game.teams[1].score}),ae(e.data.game.time_seconds,e.data.game.isOT);const E=[f.map(function(a){return a.boost})].join("<br/>"),o=[d.map(function(a){return a.boost})].join("<br/>");me({blue:E,orange:o});const l=E.split(",")[0],n=E.split(",")[1],y=E.split(",")[2],h=o.split(",")[0],C=o.split(",")[1],O=o.split(",")[2];document.getElementById("teamLeft-boost-track-fill-1").style.width=l/100*345,document.getElementById("teamLeft-boost-track-fill-2").style.width=n/100*345,document.getElementById("teamLeft-boost-track-fill-3").style.width=y/100*345,document.getElementById("teamRight-boost-track-fill-1").style.width=h/100*345,document.getElementById("teamRight-boost-track-fill-2").style.width=C/100*345,document.getElementById("teamRight-boost-track-fill-3").style.width=O/100*345;const k=e.data.game.teams.map(function(a){return a.color_primary}),v=k[0],P=k[1],L=e.data.players[e.data.game.target],x=(L==null?void 0:L.team)==0?v:P,U=document.querySelector("#target-boost-track-fill");U.style.stroke=`${"#"+x}`;const X=document.querySelector("#target-statcard-bg");X.style.borderColor=`${"#"+x}`;const z=document.getElementById("ScoreCard-Container");e.data.game.isReplay?z.style.opacity=1:z.style.opacity=0;const G=document.getElementById("overtime-logo");e.data.game.isOT?G.style.opacity=1:G.style.opacity=0}if(e.event==="game:update_state"){const c=e.data.game.teams,m=c[0],f=c[1];u=m.color_primary,i=f.color_primary,document.getElementById("blue-win-1").style.borderColor=`#${u}`,document.getElementById("blue-win-2").style.borderColor=`#${u}`,document.getElementById("blue-win-3").style.borderColor=`#${u}`,document.getElementById("blue-win-4").style.borderColor=`#${u}`,document.getElementById("orange-win-1").style.borderColor=`#${i}`,document.getElementById("orange-win-2").style.borderColor=`#${i}`,document.getElementById("orange-win-3").style.borderColor=`#${i}`,document.getElementById("orange-win-4").style.borderColor=`#${i}`}if(e.event==="game:pre_countdown_begin"&&(F.style.opacity=0,M.pause()),e.event==="game:round_started_go"&&M.setCurrentTime(0),e.event==="game:match_created"&&(M.play(),F.style.opacity=1),e.event==="game:goal_scored"){const c=document.getElementById("replay-text");c.innerHTML="REPLAY";const m=e.data.scorer.teamnum,f=e.data.scorer.name,g=document.getElementById("Scorer");g.innerHTML=`${f}`;const d=e.data.assister.name,b=document.getElementById("Assister");b.innerHTML=`${d}`;const r=Math.trunc(e.data.goalspeed/1.609),s=document.getElementById("BallSpeed");s.innerHTML=`${r}     MPH`;const E=e.data.goaltime,o=document.getElementById("GoalTime"),l=`${E}`;o.innerHTML=ue(l);const n=document.getElementById("scorecard-bg");m===0?(n.style.backgroundColor=`#${u}`,n.style.boxShadow=`0px 25px 100px 100px #${u}`):(n.style.backgroundColor=`#${i}`,n.style.boxShadow=`0px 25px 100px 100px #${i}`),d===""?document.getElementById("AssisterImage").style.opacity=0:document.getElementById("AssisterImage").style.opacity=1}const p=document.getElementById("replay-swipe");if(e.event==="game:replay_start"&&(p.style.opacity=1,p.style.transition="opacity 0s",setTimeout(()=>{p.style.opacity=0,p.style.transition="opacity 1s"},1e3)),e.event==="game:match_ended"){const c=e.data.winner_team_num;c===0?J++:c===1&&V++,K++,ye(),Y()}if(e.event==="game:update_state"){const c={BlueBoost1:document.querySelector("#teamLeft-boost-track-fill-1"),BlueBoost2:document.querySelector("#teamLeft-boost-track-fill-2"),BlueBoost3:document.querySelector("#teamLeft-boost-track-fill-3")},m={BlueBorder1:document.querySelector("#teamLeft-boost-bg-1"),BlueBorder2:document.querySelector("#teamLeft-boost-bg-2"),BlueBorder3:document.querySelector("#teamLeft-boost-bg-3")},f={OrangeBoost1:document.querySelector("#teamRight-boost-track-fill-1"),OrangeBoost2:document.querySelector("#teamRight-boost-track-fill-2"),OrangeBoost3:document.querySelector("#teamRight-boost-track-fill-3")},g={OrangeBorder1:document.querySelector("#teamRight-boost-bg-1"),OrangeBorder2:document.querySelector("#teamRight-boost-bg-2"),OrangeBorder3:document.querySelector("#teamRight-boost-bg-3")};document.querySelector(".team#blue #score-bg").style.background=`#${u}`,document.querySelector(".team#orange #score-bg").style.background=`#${i}`,document.querySelector(".team#blue").style.borderColor=`#${u}`,document.querySelector(".team#orange").style.borderColor=`#${i}`,document.getElementById("BlueScore").style.backgroundColor=`#${u}`,document.getElementById("OrangeScore").style.backgroundColor=`#${i}`,document.querySelector("#BlueTeamName").style.borderColor=`#${u}`,document.querySelector("#OrangeTeamName").style.borderColor=`#${i}`,document.querySelector("#BluePlayerNames").style.borderColor=`#${u}`,document.querySelector("#OrangePlayerNames").style.borderColor=`#${i}`,document.querySelector(".StatBar-Blue").style.borderColor=`#${u}`,document.querySelector(".StatBar-Orange").style.borderColor=`#${i}`,document.querySelector(".BlueTeam .PlayerStats").style.borderColor=`#${u}`,document.querySelector(".OrangeTeam .PlayerStats").style.borderColor=`#${i}`,document.querySelector(".StatBar-Blue").style.backgroundColor=`#${u}`,document.querySelector(".StatBar-Orange").style.backgroundColor=`#${i}`;const d={BlueGoalsBar:document.querySelector("#BlueGoalsBar"),BlueAssistsBar:document.querySelector("#BlueAssistsBar"),BlueSavesBar:document.querySelector("#BlueSavesBar"),BlueShotsBar:document.querySelector("#BlueShotsBar"),BlueDemosBar:document.querySelector("#BlueDemosBar"),BlueScoreBar:document.querySelector("#BlueScoreBar")},b={OrangeGoalsBar:document.querySelector("#OrangeGoalsBar"),OrangeAssistsBar:document.querySelector("#OrangeAssistsBar"),OrangeSavesBar:document.querySelector("#OrangeSavesBar"),OrangeShotsBar:document.querySelector("#OrangeShotsBar"),OrangeDemosBar:document.querySelector("#OrangeDemosBar"),OrangeScoreBar:document.querySelector("#OrangeScoreBar")};for(let r in d)d[r]&&(d[r].style.backgroundColor=`#${u}`);for(let r in b)b[r]&&(b[r].style.backgroundColor=`#${i}`);for(let r in c)c[r]&&(c[r].style.fill=`#${u}`);for(let r in m)m[r]&&(m[r].style.borderColor=`#${u}`);for(let r in f)f[r]&&(f[r].style.fill=`#${i}`);for(let r in g)g[r]&&(g[r].style.borderColor=`#${i}`)}if(e.event==="game:match_created"){let m=function(f){Object.values(c).forEach(g=>{g&&(g.style.opacity=f)})};var j=m;console.log("Match created"),S.style.opacity=0;const c={scorebug:document.querySelector(".scorebug"),teamLeftMeters:document.querySelector(".TeamLeftBoostMeters"),teamRightMeters:document.querySelector(".TeamRightBoostMeters"),blueTeamName:document.querySelector("#blue-team-name"),orangeTeamName:document.querySelector("#orange-team-name"),overtimeLogo:document.querySelector("#overtime-logo"),SeriesText:document.getElementById("Series-Container-bg"),SeriesBlue1:document.getElementById("blue-win-1"),SeriesBlue2:document.getElementById("blue-win-2"),SeriesBlue3:document.getElementById("blue-win-3"),SeriesBlue4:document.getElementById("blue-win-4"),SeriesOrange1:document.getElementById("orange-wins-1"),SeriesOrange2:document.getElementById("orange-wins-2"),SeriesOrange3:document.getElementById("orange-wins-3"),SeriesOrange4:document.getElementById("orange-wins-4")};m(0)}if(e.event==="game:pre_countdown_begin"){let m=function(g){Object.values(c).forEach(d=>{d&&(d.style.opacity=g)})};var j=m;const c={scorebug:document.querySelector(".scorebug"),teamLeftMeters:document.querySelector(".TeamLeftBoostMeters"),teamRightMeters:document.querySelector(".TeamRightBoostMeters"),blueTeamName:document.querySelector("#blue-team-name"),orangeTeamName:document.querySelector("#orange-team-name"),SeriesText:document.getElementById("Series-Container-bg"),SeriesBlue1:document.getElementById("blue-win-1"),SeriesBlue2:document.getElementById("blue-win-2"),SeriesBlue3:document.getElementById("blue-win-3"),SeriesBlue4:document.getElementById("blue-win-4"),SeriesOrange1:document.getElementById("orange-wins-1"),SeriesOrange2:document.getElementById("orange-wins-2"),SeriesOrange3:document.getElementById("orange-wins-3"),SeriesOrange4:document.getElementById("orange-wins-4")};m(1),B.style.opacity=0}e.event==="game:round_started_go"&&(B.currentTime=0,q.currentTime=0,M.setCurrentTime(0));const I="373d4a";if(e.event==="game:update_state"){const g=[Object.values(e.data.players).filter(s=>s.team===0).map(function(s){return s.name})].join("<br/>"),b=[Object.values(e.data.players).filter(s=>s.team===1).map(function(s){return s.name})].join(`
`),r=e.data.players[e.data.game.target];if(e.data.game.hasTarget,r){const s=r.name,E=g.split(",")[0],o=g.split(",")[1],l=g.split(",")[2],n=b.split(",")[0],y=b.split(",")[1],h=b.split(",")[2],C=document.getElementById("teamLeft-boost-bg-1"),O=document.getElementById("teamLeft-boost-bg-2"),$=document.getElementById("teamLeft-boost-bg-3"),k=document.getElementById("teamRight-boost-bg-1"),v=document.getElementById("teamRight-boost-bg-2"),P=document.getElementById("teamRight-boost-bg-3"),L=[E,o,l].includes(s),x=[n,y,h].includes(s);H&&H.team!==r.team&&(C.style.backgroundColor="#373d4a",O.style.backgroundColor="#373d4a",$.style.backgroundColor="#373d4a",k.style.backgroundColor="#373d4a",v.style.backgroundColor="#373d4a",P.style.backgroundColor="#373d4a"),L?(console.log(`Spectated player is on the Blue team: ${s}`),s===E?C.style.backgroundColor=`#${u}`:C.style.backgroundColor="#373d4a",s===o?O.style.backgroundColor=`#${u}`:O.style.backgroundColor="#373d4a",s===l?$.style.backgroundColor=`#${u}`:$.style.backgroundColor="#373d4a"):x&&(console.log(`Spectated player is on the Orange team: ${s}`),s===n?k.style.backgroundColor=`#${i}`:k.style.backgroundColor="#373d4a",s===y?v.style.backgroundColor=`#${i}`:v.style.backgroundColor="#373d4a",s===h?P.style.backgroundColor=`#${i}`:P.style.backgroundColor="#373d4a"),H=r}if(e.data.game.target===""){const s=document.getElementById("teamLeft-boost-bg-1"),E=document.getElementById("teamLeft-boost-bg-2"),o=document.getElementById("teamLeft-boost-bg-3"),l=document.getElementById("teamRight-boost-bg-1"),n=document.getElementById("teamRight-boost-bg-2"),y=document.getElementById("teamRight-boost-bg-3");s.style.backgroundColor=`#${I}`,E.style.backgroundColor=`#${I}`,o.style.backgroundColor=`#${I}`,l.style.backgroundColor=`#${I}`,n.style.backgroundColor=`#${I}`,y.style.backgroundColor=`#${I}`,H=null;return}}if(e.event==="game:podium_start"){let m=function(o,l){o.style.fontSize=l.length>11?"68px":"80px"},f=function(o,l){o.style.fontSize=l.length>8?"40px":"50px"},g=function(o){const l=document.querySelector(".BlueTeam .TeamName"),n=document.querySelector(".OrangeTeam .TeamName");l.innerHTML=o[0].name,n.innerHTML=o[1].name,m(l,o[0].name),m(n,o[1].name);const y=document.querySelector(".BlueTeam .Score"),h=document.querySelector(".OrangeTeam .Score");y.innerHTML=o[0].score,h.innerHTML=o[1].score},r=function(){function o(h,C){return h.reduce((O,$)=>O+($[C]||0),0)}const l={goals:o(d,"goals"),assists:o(d,"assists"),saves:o(d,"saves"),shots:o(d,"shots"),demos:o(d,"demos"),score:o(d,"score")},n={goals:o(b,"goals"),assists:o(b,"assists"),saves:o(b,"saves"),shots:o(b,"shots"),demos:o(b,"demos"),score:o(b,"score")};function y(h,C,O){const $=C+O,k=$>0?C/$*100:0,v=$>0?O/$*100:0,P=document.getElementById(`Blue${h}Bar`),L=document.getElementById(`Orange${h}Bar`);P.style.width=`${k}%`,L.style.width=`${v}%`}y("Goals",l.goals,n.goals),y("Assists",l.assists,n.assists),y("Saves",l.saves,n.saves),y("Shots",l.shots,n.shots),y("Demos",l.demos,n.demos),y("Score",l.score,n.score)},s=function(){d.forEach((o,l)=>{const n=document.querySelector(`.BlueTeam .Players .Player:nth-child(${l+1})`);n.innerHTML=o.name,f(n,o.name);const y=document.querySelector(`.BlueTeam .PlayerStats .PlayerStat:nth-child(${l+1})`);y.innerHTML=`
            ${o.goals}<br>
            ${o.assists}<br>
            ${o.saves}<br>
            ${o.shots}<br>
            ${o.demos}<br>
            ${o.score}
          `}),b.forEach((o,l)=>{const n=document.querySelector(`.OrangeTeam .Players .Player:nth-child(${l+1})`);n.innerHTML=o.name,f(n,o.name);const y=document.querySelector(`.OrangeTeam .PlayerStats .PlayerStat:nth-child(${l+1})`);y.innerHTML=`
            ${o.goals}<br>
            ${o.assists}<br>
            ${o.saves}<br>
            ${o.shots}<br>
            ${o.demos}<br>
            ${o.score}
          `}),r()};var Se=m,be=f,Q=g,fe=r,pe=s;console.log("Podium Started"),console.log(w),ge.play();const c=document.querySelector(".PostGameData");c.style.opacity=1,g(w.game.teams);const d=Object.values(w.players).filter(o=>o.team===0),b=Object.values(w.players).filter(o=>o.team===1);s()}if(e.event==="game:match_destroyed"&&(S.style.opacity=0),e.event==="game:initialized"){let m=function(g){Object.values(c).forEach(d=>{d&&(d.style.opacity=g)})};var j=m;console.log("Match initialized"),S.style.opacity=0,F.style.opacity=1,M.play(),q.style.opacity=0;const c={scorebug:document.querySelector(".scorebug"),teamLeftMeters:document.querySelector(".TeamLeftBoostMeters"),teamRightMeters:document.querySelector(".TeamRightBoostMeters"),blueTeamName:document.querySelector("#blue-team-name"),orangeTeamName:document.querySelector("#orange-team-name"),overtimeLogo:document.querySelector("#overtime-logo"),SeriesText:document.getElementById("Series-Container-bg"),SeriesBlue1:document.getElementById("blue-win-1"),SeriesBlue2:document.getElementById("blue-win-2"),SeriesBlue3:document.getElementById("blue-win-3"),SeriesBlue4:document.getElementById("blue-win-4"),SeriesOrange1:document.getElementById("orange-wins-1"),SeriesOrange2:document.getElementById("orange-wins-2"),SeriesOrange3:document.getElementById("orange-wins-3"),SeriesOrange4:document.getElementById("orange-wins-4")};m(0)}});
