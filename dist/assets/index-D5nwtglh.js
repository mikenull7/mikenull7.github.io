(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))C(S);new MutationObserver(S=>{for(const p of S)if(p.type==="childList")for(const q of p.addedNodes)q.tagName==="LINK"&&q.rel==="modulepreload"&&C(q)}).observe(document,{childList:!0,subtree:!0});function m(S){const p={};return S.integrity&&(p.integrity=S.integrity),S.referrerPolicy&&(p.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?p.credentials="include":S.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function C(S){if(S.ep)return;S.ep=!0;const p=m(S);fetch(S.href,p)}})();const D=new WebSocket("ws://localhost:49122");D.onopen=()=>{console.log("Connected to SOS. how many times do we have to do this")};D.addEventListener("message",t=>{t.data});D.onmessage=t=>{};const G=new WebSocket("ws://localhost:8081");G.onopen=()=>{console.log("âœ… Connected to Relay"),G.send(JSON.stringify({event:"wsRelay:register",data:"custom:title"}))};G.addEventListener("message",async t=>{let e;try{if(t.data instanceof Blob){const m=await t.data.text();e=JSON.parse(m)}else e=JSON.parse(t.data)}catch(m){console.error("âŒ Failed to parse message:",m,t.data);return}if(console.log("ðŸ“¡ Relay Message:",e.event,e.data),e.event==="custom:title"){console.log("ðŸ·ï¸ Received custom title:",e.data);const m=document.querySelector(".title");m&&(m.textContent=e.data)}if(e.event==="custom:blueLogo"){const m=document.getElementById("blue-icon");m&&(m.src=e.data==="default"?"./Overlay_images/octane_faceright.png":`data:image/png;base64,${e.data}`)}e.event==="custom:orangeLogo"&&document.getElementById("orange-icon")&&(blueIcon.src=e.data==="default"?"./Overlay_images/octane_faceright.png":`data:image/png;base64,${e.data}`)});const J={boost:34},te=t=>{const e=document.querySelector("#target-boost-track-fill"),m=e.r.baseVal.value*2*Math.PI;e.style.strokeDasharray=`${m*.75} ${m}`,e.style.strokeDashoffset=(100-t)/100*m*.75},oe=t=>{J.boost=t,te(J.boost),document.querySelector("#target-boost-value").innerHTML=`${t}`},ae=(t={blue:0,orange:0})=>{document.querySelector(".team#blue #score").innerHTML=t.blue,document.querySelector(".team#orange #score").innerHTML=t.orange},re=(t,e)=>{const m=Math.max(Math.floor(t/60),0),C=t%60;return`${e?"+":""}${m}:${C.toString().padStart(2,"0")}`},ne=(t,e)=>{document.querySelector(".clock").innerHTML=re(t,e)},E={name:"name",shots:34,assists:10,saves:3,goals:20,score:200},se=t=>{E.name=t,document.querySelector("#target-statcard-playername").innerHTML=`${E.name}`},K=t=>{E.shots=t,document.querySelector("#target-statcard-shots").innerHTML=`${E.shots}`},le=t=>{E.assists=t,document.querySelector("#target-statcard-assists").innerHTML=`${E.assists}`},ce=t=>{E.saves=t,document.querySelector("#target-statcard-saves").innerHTML=`${E.saves}`},me=t=>{E.goals=t,document.querySelector("#target-statcard-goals").innerHTML=`${E.goals}`},de=t=>{E.score=t,document.querySelector("#target-statcard-score").innerHTML=`${E.score}`},ue=(t={blue:"",orange:""})=>{document.querySelector("#bluenumbers").innerHTML=t.blue.split(",").join("<br/>"),document.querySelector("#orangenumbers").innerHTML=t.orange.split(",").join("<br/>")},ie=(t={blue:"",orange:""})=>{document.querySelector("#bluenames").innerHTML=t.blue.split(",").join("<br/>"),document.querySelector("#orangenames").innerHTML=t.orange.split(",").join("<br/>")},ge=t=>{const e=Math.floor(t/60),C=(t%60).toString().padStart(2,"0");return`${(e%60).toString().padStart(2,"0")}:${C}`};console.log("Starting...");let w,g,y,_=null,Y=0,Q=0,F=1;const x=new Vimeo.Player("MatchCreatedVideo",{id:1041310123,loop:!0,autoplay:!1,width:1920,height:1080}),z=document.querySelector(".MatchInitialized"),ye=document.querySelector('iframe[title="vimeo-player-1"]'),Be=new Vimeo.Player(ye);function U(){const t=document.getElementById("Series-Text");t.innerHTML=`GAME ${F} | BEST OF 7`}function Se(){for(let t=1;t<=4;t++){const e=document.getElementById(`blue-win-${t}`),m=document.getElementById(`orange-win-${t}`);e.style.backgroundColor="transparent",m.style.display="transparent"}for(let t=1;t<=Y;t++)document.getElementById(`blue-win-${t}`).style.backgroundColor=`#${g}`;for(let t=1;t<=Q;t++)document.getElementById(`orange-win-${t}`).style.backgroundColor=`#${y}`}U();D.addEventListener("message",t=>{const e=JSON.parse(t.data);if(console.log("ðŸ“¦ Event received:",e.event),console.log("PARSED",e),e.event==="custom:title"){const n=e.data;console.log("ðŸ·ï¸ Received custom title:",n);const d=document.getElementsById("title");d.innerHTML=n}const m=[document.getElementById("blue-icon"),document.getElementById("orange-icon"),document.getElementById("backgroundimages")],C=document.getElementById("game-start-flyover"),S=document.getElementById("game-end-hypechamber");document.getElementById("PostGame-bg");const p=document.querySelector(".PostGameData");if(e.event==="game:update_state"&&(w=e.data),e.event==="custom:title"&&console.log("New title:",e),e.event==="game:update_state"){let r=function(a,R){R.length>11?a.style.fontSize="25px":a.style.fontSize="33px"},l=function(a){const R=document.getElementById("blue").querySelector("#name"),j=document.getElementById("orange").querySelector("#name");R.innerHTML=a.blue,j.innerHTML=a.orange,r(R,a.blue),r(j,a.orange)};var be=r,X=l;if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];oe(a.boost),document.getElementById("target-player").style.opacity=100}else e.data.game.hasTarget==!1&&(document.getElementById("target-player").style.opacity=0);if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];se(a.name)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];K(a.shots)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];le(a.assists)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];ce(a.saves)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];me(a.goals)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];de(a.score)}if(e.data.game.hasTarget){const a=e.data.players[e.data.game.target];K(a.shots)}e.data.game.hasTarget?document.getElementById("statcard").style.opacity=100:e.data.game.hasTarget==!1&&(document.getElementById("statcard").style.opacity=0);const n=0,d=1,f=Object.values(e.data.players).filter(a=>a.team===n),i=[f.map(function(a){return a.name})].join("<br/>"),u=Object.values(e.data.players).filter(a=>a.team===d),b=[u.map(function(a){return a.name})].join(`
`);ie({blue:i,orange:b}),l({blue:e.data.game.teams[0].name,orange:e.data.game.teams[1].name}),ae({blue:e.data.game.teams[0].score,orange:e.data.game.teams[1].score}),ne(e.data.game.time_seconds,e.data.game.isOT);const T=[f.map(function(a){return a.boost})].join("<br/>"),o=[u.map(function(a){return a.boost})].join("<br/>");ue({blue:T,orange:o});const c=T.split(",")[0],s=T.split(",")[1],B=T.split(",")[2],h=o.split(",")[0],$=o.split(",")[1],O=o.split(",")[2];document.getElementById("teamLeft-boost-track-fill-1").style.width=c/100*345,document.getElementById("teamLeft-boost-track-fill-2").style.width=s/100*345,document.getElementById("teamLeft-boost-track-fill-3").style.width=B/100*345,document.getElementById("teamRight-boost-track-fill-1").style.width=h/100*345,document.getElementById("teamRight-boost-track-fill-2").style.width=$/100*345,document.getElementById("teamRight-boost-track-fill-3").style.width=O/100*345;const v=e.data.game.teams.map(function(a){return a.color_primary}),k=v[0],L=v[1],P=e.data.players[e.data.game.target],H=(P==null?void 0:P.team)==0?k:L,Z=document.querySelector("#target-boost-track-fill");Z.style.stroke=`${"#"+H}`;const ee=document.querySelector("#target-statcard-bg");ee.style.borderColor=`${"#"+H}`;const W=document.getElementById("ScoreCard-Container");e.data.game.isReplay?W.style.opacity=1:W.style.opacity=0;const V=document.getElementById("overtime-logo"),N=document.getElementById("Series-Text");e.data.game.isOT?(V.style.opacity=0,N.innerHTML=`GAME ${F} | OVERTIME`,N.style.color="rgba(200, 0, 0, 1)"):(V.style.opacity=0,N.innerHTML=`GAME ${F} | BEST OF 7`,N.style.color="white")}if(e.event==="game:update_state"){const n=e.data.game.teams,d=n[0],f=n[1];g=d.color_primary,y=f.color_primary,document.getElementById("blue-win-1").style.borderColor=`#${g}`,document.getElementById("blue-win-2").style.borderColor=`#${g}`,document.getElementById("blue-win-3").style.borderColor=`#${g}`,document.getElementById("blue-win-4").style.borderColor=`#${g}`,document.getElementById("orange-win-1").style.borderColor=`#${y}`,document.getElementById("orange-win-2").style.borderColor=`#${y}`,document.getElementById("orange-win-3").style.borderColor=`#${y}`,document.getElementById("orange-win-4").style.borderColor=`#${y}`}if(e.event==="game:pre_countdown_begin"&&(z.style.opacity=0,x.pause(),m.forEach(n=>n.style.display="block")),e.event==="game:round_started_go"&&x.setCurrentTime(0),e.event==="game:match_created"&&(x.play(),z.style.opacity=1,m.forEach(n=>n.style.display="none")),e.event==="game:goal_scored"){const n=document.getElementById("replay-text");n.innerHTML="REPLAY";const d=e.data.scorer.teamnum,f=e.data.scorer.name,i=document.getElementById("Scorer");i.innerHTML=`${f}`;const u=e.data.assister.name,b=document.getElementById("Assister");b.innerHTML=`${u}`;const r=Math.trunc(e.data.goalspeed/1.609),l=document.getElementById("BallSpeed");l.innerHTML=`${r}     MPH`;const T=e.data.goaltime,o=document.getElementById("GoalTime"),c=`${T}`;o.innerHTML=ge(c);const s=document.getElementById("scorecard-bg");d===0?(s.style.backgroundColor=`#${g}`,s.style.boxShadow=`0px 25px 100px 100px #${g}`):(s.style.backgroundColor=`#${y}`,s.style.boxShadow=`0px 25px 100px 100px #${y}`),u===""?document.getElementById("AssisterImage").style.opacity=0:document.getElementById("AssisterImage").style.opacity=1}const q=document.getElementById("replay-swipe");if(e.event==="game:replay_start"&&(q.style.opacity=1,q.style.transition="opacity 0s",setTimeout(()=>{q.style.opacity=0,q.style.transition="opacity 1s"},1e3)),e.event==="game:match_ended"){const n=e.data.winner_team_num;n===0?Y++:n===1&&Q++,F++,Se(),U()}if(e.event==="game:update_state"){const n={BlueBoost1:document.querySelector("#teamLeft-boost-track-fill-1"),BlueBoost2:document.querySelector("#teamLeft-boost-track-fill-2"),BlueBoost3:document.querySelector("#teamLeft-boost-track-fill-3")},d={BlueBorder1:document.querySelector("#teamLeft-boost-bg-1"),BlueBorder2:document.querySelector("#teamLeft-boost-bg-2"),BlueBorder3:document.querySelector("#teamLeft-boost-bg-3")},f={OrangeBoost1:document.querySelector("#teamRight-boost-track-fill-1"),OrangeBoost2:document.querySelector("#teamRight-boost-track-fill-2"),OrangeBoost3:document.querySelector("#teamRight-boost-track-fill-3")},i={OrangeBorder1:document.querySelector("#teamRight-boost-bg-1"),OrangeBorder2:document.querySelector("#teamRight-boost-bg-2"),OrangeBorder3:document.querySelector("#teamRight-boost-bg-3")};document.querySelector(".team#blue #score-bg").style.background=`#${g}`,document.querySelector(".team#orange #score-bg").style.background=`#${y}`,document.querySelector(".team#blue").style.borderColor=`#${g}`,document.querySelector(".team#orange").style.borderColor=`#${y}`,document.getElementById("BlueScore").style.backgroundColor=`#${g}`,document.getElementById("OrangeScore").style.backgroundColor=`#${y}`,document.querySelector("#BlueTeamName").style.borderColor=`#${g}`,document.querySelector("#OrangeTeamName").style.borderColor=`#${y}`,document.querySelector("#BluePlayerNames").style.borderColor=`#${g}`,document.querySelector("#OrangePlayerNames").style.borderColor=`#${y}`,document.querySelector(".StatBar-Blue").style.borderColor=`#${g}`,document.querySelector(".StatBar-Orange").style.borderColor=`#${y}`,document.querySelector(".BlueTeam .PlayerStats").style.borderColor=`#${g}`,document.querySelector(".OrangeTeam .PlayerStats").style.borderColor=`#${y}`,document.querySelector(".StatBar-Blue").style.backgroundColor=`#${g}`,document.querySelector(".StatBar-Orange").style.backgroundColor=`#${y}`;const u={BlueGoalsBar:document.querySelector("#BlueGoalsBar"),BlueAssistsBar:document.querySelector("#BlueAssistsBar"),BlueSavesBar:document.querySelector("#BlueSavesBar"),BlueShotsBar:document.querySelector("#BlueShotsBar"),BlueDemosBar:document.querySelector("#BlueDemosBar"),BlueScoreBar:document.querySelector("#BlueScoreBar")},b={OrangeGoalsBar:document.querySelector("#OrangeGoalsBar"),OrangeAssistsBar:document.querySelector("#OrangeAssistsBar"),OrangeSavesBar:document.querySelector("#OrangeSavesBar"),OrangeShotsBar:document.querySelector("#OrangeShotsBar"),OrangeDemosBar:document.querySelector("#OrangeDemosBar"),OrangeScoreBar:document.querySelector("#OrangeScoreBar")};for(let r in u)u[r]&&(u[r].style.backgroundColor=`#${g}`);for(let r in b)b[r]&&(b[r].style.backgroundColor=`#${y}`);for(let r in n)n[r]&&(n[r].style.fill=`#${g}`);for(let r in d)d[r]&&(d[r].style.borderColor=`#${g}`);for(let r in f)f[r]&&(f[r].style.fill=`#${y}`);for(let r in i)i[r]&&(i[r].style.borderColor=`#${y}`)}if(e.event==="game:match_created"){let d=function(f){Object.values(n).forEach(i=>{i&&(i.style.opacity=f)})};var A=d;console.log("Match created"),p.style.opacity=0;const n={scorebug:document.querySelector(".scorebug"),teamLeftMeters:document.querySelector(".TeamLeftBoostMeters"),teamRightMeters:document.querySelector(".TeamRightBoostMeters"),blueTeamName:document.querySelector("#blue-team-name"),orangeTeamName:document.querySelector("#orange-team-name"),overtimeLogo:document.querySelector("#overtime-logo"),SeriesText:document.getElementById("Series-Container-bg"),SeriesBlue1:document.getElementById("blue-win-1"),SeriesBlue2:document.getElementById("blue-win-2"),SeriesBlue3:document.getElementById("blue-win-3"),SeriesBlue4:document.getElementById("blue-win-4"),SeriesOrange1:document.getElementById("orange-wins-1"),SeriesOrange2:document.getElementById("orange-wins-2"),SeriesOrange3:document.getElementById("orange-wins-3"),SeriesOrange4:document.getElementById("orange-wins-4")};d(0)}if(e.event==="game:pre_countdown_begin"){let d=function(i){Object.values(n).forEach(u=>{u&&(u.style.opacity=i)})};var A=d;const n={scorebug:document.querySelector(".scorebug"),teamLeftMeters:document.querySelector(".TeamLeftBoostMeters"),teamRightMeters:document.querySelector(".TeamRightBoostMeters"),blueTeamName:document.querySelector("#blue-team-name"),orangeTeamName:document.querySelector("#orange-team-name"),SeriesText:document.getElementById("Series-Container-bg"),SeriesBlue1:document.getElementById("blue-win-1"),SeriesBlue2:document.getElementById("blue-win-2"),SeriesBlue3:document.getElementById("blue-win-3"),SeriesBlue4:document.getElementById("blue-win-4"),SeriesOrange1:document.getElementById("orange-wins-1"),SeriesOrange2:document.getElementById("orange-wins-2"),SeriesOrange3:document.getElementById("orange-wins-3"),SeriesOrange4:document.getElementById("orange-wins-4")};d(1),C.style.opacity=0}e.event==="game:round_started_go"&&(C.currentTime=0,S.currentTime=0,x.setCurrentTime(0));const M="373d4a";if(e.event==="game:update_state"){const i=[Object.values(e.data.players).filter(l=>l.team===0).map(function(l){return l.name})].join("<br/>"),b=[Object.values(e.data.players).filter(l=>l.team===1).map(function(l){return l.name})].join(`
`),r=e.data.players[e.data.game.target];if(e.data.game.hasTarget,r){const l=r.name,T=i.split(",")[0],o=i.split(",")[1],c=i.split(",")[2],s=b.split(",")[0],B=b.split(",")[1],h=b.split(",")[2],$=document.getElementById("teamLeft-boost-bg-1"),O=document.getElementById("teamLeft-boost-bg-2"),I=document.getElementById("teamLeft-boost-bg-3"),v=document.getElementById("teamRight-boost-bg-1"),k=document.getElementById("teamRight-boost-bg-2"),L=document.getElementById("teamRight-boost-bg-3"),P=[T,o,c].includes(l),H=[s,B,h].includes(l);_&&_.team!==r.team&&($.style.backgroundColor="#373d4a",O.style.backgroundColor="#373d4a",I.style.backgroundColor="#373d4a",v.style.backgroundColor="#373d4a",k.style.backgroundColor="#373d4a",L.style.backgroundColor="#373d4a"),P?(console.log(`Spectated player is on the Blue team: ${l}`),l===T?$.style.backgroundColor=`#${g}`:$.style.backgroundColor="#373d4a",l===o?O.style.backgroundColor=`#${g}`:O.style.backgroundColor="#373d4a",l===c?I.style.backgroundColor=`#${g}`:I.style.backgroundColor="#373d4a"):H&&(console.log(`Spectated player is on the Orange team: ${l}`),l===s?v.style.backgroundColor=`#${y}`:v.style.backgroundColor="#373d4a",l===B?k.style.backgroundColor=`#${y}`:k.style.backgroundColor="#373d4a",l===h?L.style.backgroundColor=`#${y}`:L.style.backgroundColor="#373d4a"),_=r}if(e.data.game.target===""){const l=document.getElementById("teamLeft-boost-bg-1"),T=document.getElementById("teamLeft-boost-bg-2"),o=document.getElementById("teamLeft-boost-bg-3"),c=document.getElementById("teamRight-boost-bg-1"),s=document.getElementById("teamRight-boost-bg-2"),B=document.getElementById("teamRight-boost-bg-3");l.style.backgroundColor=`#${M}`,T.style.backgroundColor=`#${M}`,o.style.backgroundColor=`#${M}`,c.style.backgroundColor=`#${M}`,s.style.backgroundColor=`#${M}`,B.style.backgroundColor=`#${M}`,_=null;return}}if(e.event==="game:podium_start"){let d=function(o,c){o.style.fontSize=c.length>11?"68px":"80px"},f=function(o,c){o.style.fontSize=c.length>8?"40px":"50px"},i=function(o){const c=document.querySelector(".BlueTeam .TeamName"),s=document.querySelector(".OrangeTeam .TeamName");c.innerHTML=o[0].name,s.innerHTML=o[1].name,d(c,o[0].name),d(s,o[1].name);const B=document.querySelector(".BlueTeam .Score"),h=document.querySelector(".OrangeTeam .Score");B.innerHTML=o[0].score,h.innerHTML=o[1].score},r=function(){function o(h,$){return h.reduce((O,I)=>O+(I[$]||0),0)}const c={goals:o(u,"goals"),assists:o(u,"assists"),saves:o(u,"saves"),shots:o(u,"shots"),demos:o(u,"demos"),score:o(u,"score")},s={goals:o(b,"goals"),assists:o(b,"assists"),saves:o(b,"saves"),shots:o(b,"shots"),demos:o(b,"demos"),score:o(b,"score")};function B(h,$,O){const I=$+O,v=I>0?$/I*100:0,k=I>0?O/I*100:0,L=document.getElementById(`Blue${h}Bar`),P=document.getElementById(`Orange${h}Bar`);L.style.width=`${v}%`,P.style.width=`${k}%`}B("Goals",c.goals,s.goals),B("Assists",c.assists,s.assists),B("Saves",c.saves,s.saves),B("Shots",c.shots,s.shots),B("Demos",c.demos,s.demos),B("Score",c.score,s.score)},l=function(){u.forEach((o,c)=>{const s=document.querySelector(`.BlueTeam .Players .Player:nth-child(${c+1})`);s.innerHTML=o.name,f(s,o.name);const B=document.querySelector(`.BlueTeam .PlayerStats .PlayerStat:nth-child(${c+1})`);B.innerHTML=`
            ${o.goals}<br>
            ${o.assists}<br>
            ${o.saves}<br>
            ${o.shots}<br>
            ${o.demos}<br>
            ${o.score}
          `}),b.forEach((o,c)=>{const s=document.querySelector(`.OrangeTeam .Players .Player:nth-child(${c+1})`);s.innerHTML=o.name,f(s,o.name);const B=document.querySelector(`.OrangeTeam .PlayerStats .PlayerStat:nth-child(${c+1})`);B.innerHTML=`
            ${o.goals}<br>
            ${o.assists}<br>
            ${o.saves}<br>
            ${o.shots}<br>
            ${o.demos}<br>
            ${o.score}
          `}),r()};var fe=d,pe=f,X=i,he=r,Ee=l;console.log("Podium Started"),console.log(w),Be.play();const n=document.querySelector(".PostGameData");n.style.opacity=1,i(w.game.teams);const u=Object.values(w.players).filter(o=>o.team===0),b=Object.values(w.players).filter(o=>o.team===1);l()}if(e.event==="game:match_destroyed"&&(p.style.opacity=0),e.event==="game:initialized"){let d=function(i){Object.values(n).forEach(u=>{u&&(u.style.opacity=i)})};var A=d;console.log("Match initialized"),p.style.opacity=0,m.forEach(i=>i.style.display="none"),z.style.opacity=1,x.play(),S.style.opacity=0;const n={scorebug:document.querySelector(".scorebug"),teamLeftMeters:document.querySelector(".TeamLeftBoostMeters"),teamRightMeters:document.querySelector(".TeamRightBoostMeters"),blueTeamName:document.querySelector("#blue-team-name"),orangeTeamName:document.querySelector("#orange-team-name"),overtimeLogo:document.querySelector("#overtime-logo"),SeriesText:document.getElementById("Series-Container-bg"),SeriesBlue1:document.getElementById("blue-win-1"),SeriesBlue2:document.getElementById("blue-win-2"),SeriesBlue3:document.getElementById("blue-win-3"),SeriesBlue4:document.getElementById("blue-win-4"),SeriesOrange1:document.getElementById("orange-wins-1"),SeriesOrange2:document.getElementById("orange-wins-2"),SeriesOrange3:document.getElementById("orange-wins-3"),SeriesOrange4:document.getElementById("orange-wins-4")};d(0)}});
